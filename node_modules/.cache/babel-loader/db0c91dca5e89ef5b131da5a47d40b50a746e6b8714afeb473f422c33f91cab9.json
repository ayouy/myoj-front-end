{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nimport React, { forwardRef, useContext, useRef, useState, useImperativeHandle, useEffect, useCallback, useMemo } from 'react';\nimport ArcoCSSTransition from '../_util/CSSTransition';\nimport { findDOMNode } from '../_util/react-dom';\nimport useMergeProps from '../_util/hooks/useMergeProps';\nimport useMergeValue from '../_util/hooks/useMergeValue';\nimport cs from '../_util/classNames';\nimport { on, off, isServerRendering } from '../_util/dom';\nimport ResizeObserver from '../_util/resizeObserver';\nimport IconLoading from '../../icon/react-icon/IconLoading';\nimport IconZoomOut from '../../icon/react-icon/IconZoomOut';\nimport IconZoomIn from '../../icon/react-icon/IconZoomIn';\nimport IconFullscreen from '../../icon/react-icon/IconFullscreen';\nimport IconClose from '../../icon/react-icon/IconClose';\nimport IconRotateLeft from '../../icon/react-icon/IconRotateLeft';\nimport IconRotateRight from '../../icon/react-icon/IconRotateRight';\nimport IconOriginalSize from '../../icon/react-icon/IconOriginalSize';\nimport ConfigProvider, { ConfigContext } from '../ConfigProvider';\nimport useImageStatus from './utils/hooks/useImageStatus';\nimport PreviewScales, { defaultScales } from './utils/getScale';\nimport getFixTranslate from './utils/getFixTranslate';\nimport ImagePreviewToolbar from './image-preview-toolbar';\nimport Portal from '../Portal';\nimport { PreviewGroupContext } from './previewGroupContext';\nimport ImagePreviewArrow from './image-preview-arrow';\nimport useOverflowHidden from '../_util/hooks/useOverflowHidden';\nimport { ArrowDown, ArrowLeft, ArrowRight, ArrowUp, Esc } from '../_util/keycode';\nimport useUpdate from '../_util/hooks/useUpdate';\nimport { isUndefined } from '../_util/is';\nvar ROTATE_STEP = 90;\nvar defaultProps = {\n  maskClosable: true,\n  closable: true,\n  breakPoint: 316,\n  actionsLayout: ['fullScreen', 'rotateRight', 'rotateLeft', 'zoomIn', 'zoomOut', 'originalSize', 'extra'],\n  getPopupContainer: function () {\n    return document.body;\n  },\n  escToExit: true,\n  scales: defaultScales,\n  resetTranslate: true\n};\nfunction Preview(baseProps, ref) {\n  var _a;\n  var _b = useContext(PreviewGroupContext),\n    previewGroup = _b.previewGroup,\n    previewUrlMap = _b.previewUrlMap,\n    currentIndex = _b.currentIndex,\n    setCurrentIndex = _b.setCurrentIndex,\n    infinite = _b.infinite,\n    previewPropsMap = _b.previewPropsMap;\n  var mergedPreviewProps = previewGroup ? previewPropsMap.get(currentIndex) : {};\n  var mergedProps = useMergeProps(baseProps, defaultProps, mergedPreviewProps);\n  var className = mergedProps.className,\n    style = mergedProps.style,\n    src = mergedProps.src,\n    defaultVisible = mergedProps.defaultVisible,\n    maskClosable = mergedProps.maskClosable,\n    closable = mergedProps.closable,\n    breakPoint = mergedProps.breakPoint,\n    actions = mergedProps.actions,\n    actionsLayout = mergedProps.actionsLayout,\n    getPopupContainer = mergedProps.getPopupContainer,\n    onVisibleChange = mergedProps.onVisibleChange,\n    scales = mergedProps.scales,\n    escToExit = mergedProps.escToExit,\n    _c = mergedProps.imgAttributes,\n    imgAttributes = _c === void 0 ? {} : _c,\n    imageRender = mergedProps.imageRender,\n    _d = mergedProps.extra,\n    extraNode = _d === void 0 ? null : _d,\n    resetTranslate = mergedProps.resetTranslate;\n  var mergedSrc = previewGroup ? previewUrlMap.get(currentIndex) : src;\n  var _e = __read(useState(mergedSrc), 2),\n    previewImgSrc = _e[0],\n    setPreviewImgSrc = _e[1];\n  var _f = __read(useMergeValue(false, {\n      defaultValue: defaultVisible,\n      value: mergedProps.visible\n    }), 2),\n    visible = _f[0],\n    setVisible = _f[1];\n  var globalContext = useContext(ConfigContext);\n  var getPrefixCls = globalContext.getPrefixCls,\n    locale = globalContext.locale,\n    rtl = globalContext.rtl;\n  var prefixCls = getPrefixCls('image');\n  var previewPrefixCls = prefixCls + \"-preview\";\n  var classNames = cs(previewPrefixCls, (_a = {}, _a[previewPrefixCls + \"-hide\"] = !visible, _a[previewPrefixCls + \"-rtl\"] = rtl, _a), className);\n  var refImage = useRef();\n  var refImageContainer = useRef();\n  var refWrapper = useRef();\n  var refRootWrapper = useRef();\n  var keyboardEventOn = useRef(false);\n  var refMoveData = useRef({\n    pageX: 0,\n    pageY: 0,\n    originX: 0,\n    originY: 0\n  });\n  var _g = useImageStatus('loading'),\n    isLoading = _g.isLoading,\n    isLoaded = _g.isLoaded,\n    setStatus = _g.setStatus;\n  var _h = __read(useState(false), 2),\n    toolbarSimple = _h[0],\n    setToolbarSimple = _h[1];\n  var _j = __read(useState({\n      x: 0,\n      y: 0\n    }), 2),\n    translate = _j[0],\n    setTranslate = _j[1];\n  var _k = __read(useState(1), 2),\n    scale = _k[0],\n    setScale = _k[1];\n  var _l = __read(useState(false), 2),\n    scaleValueVisible = _l[0],\n    setScaleValueVisible = _l[1];\n  var _m = __read(useState(0), 2),\n    rotate = _m[0],\n    setRotate = _m[1];\n  var _o = __read(useState(false), 2),\n    moving = _o[0],\n    setMoving = _o[1];\n  var previewScales = useMemo(function () {\n    return new PreviewScales(scales);\n  }, []);\n  var onLoad = imgAttributes.onLoad,\n    onError = imgAttributes.onError,\n    onMouseDown = imgAttributes.onMouseDown,\n    imgStyle = imgAttributes.style,\n    imgClassName = imgAttributes.className,\n    restImgAttributes = __rest(imgAttributes, [\"onLoad\", \"onError\", \"onMouseDown\", \"style\", \"className\"]);\n  // Reset image params\n  function reset() {\n    setTranslate({\n      x: 0,\n      y: 0\n    });\n    setScale(1);\n    setRotate(0);\n  }\n  useImperativeHandle(ref, function () {\n    return {\n      reset: reset,\n      getRootDOMNode: function () {\n        return refRootWrapper.current;\n      }\n    };\n  });\n  var _p = __read(useState(), 2),\n    container = _p[0],\n    setContainer = _p[1];\n  var getContainer = useCallback(function () {\n    return container;\n  }, [container]);\n  useEffect(function () {\n    var container = getPopupContainer === null || getPopupContainer === void 0 ? void 0 : getPopupContainer();\n    var containerDom = findDOMNode(container) || document.body;\n    setContainer(containerDom);\n  }, [getPopupContainer]);\n  useOverflowHidden(getContainer, {\n    hidden: visible\n  });\n  var isFixed = useMemo(function () {\n    return !isServerRendering && container === document.body;\n  }, [container]);\n  // Jump to image at the specified index\n  function jumpTo(index) {\n    var previewListLen = previewUrlMap.size;\n    if (infinite) {\n      index %= previewListLen;\n      if (index < 0) index = previewListLen - Math.abs(index);\n    }\n    if (index !== currentIndex && index >= 0 && index <= previewListLen - 1) {\n      setCurrentIndex(index);\n    }\n  }\n  function onPrev() {\n    jumpTo(currentIndex - 1);\n  }\n  function onNext() {\n    jumpTo(currentIndex + 1);\n  }\n  // Anticlockwise rotation\n  function onRotateLeft() {\n    setRotate(rotate === 0 ? 360 - ROTATE_STEP : rotate - ROTATE_STEP);\n  }\n  // Clockwise rotation\n  function onRotateRight() {\n    setRotate((rotate + ROTATE_STEP) % 360);\n  }\n  // Scale\n  var hideScaleTimer = useRef(null);\n  var showScaleValue = function () {\n    !scaleValueVisible && setScaleValueVisible(true);\n    hideScaleTimer.current && clearTimeout(hideScaleTimer.current);\n    hideScaleTimer.current = setTimeout(function () {\n      setScaleValueVisible(false);\n    }, 1000);\n  };\n  var onScaleChange = function (newScale) {\n    if (scale !== newScale) {\n      setScale(newScale);\n      showScaleValue();\n    }\n  };\n  function onZoomIn() {\n    var newScale = previewScales.getNextScale(scale, 'zoomIn');\n    onScaleChange(newScale);\n  }\n  function onZoomOut() {\n    var newScale = previewScales.getNextScale(scale, 'zoomOut');\n    onScaleChange(newScale);\n  }\n  function onWheelZoom(e) {\n    if (e.deltaY > 0) {\n      // 缩小\n      if (scale >= previewScales.minScale) {\n        // e.preventDefault();\n        onZoomOut();\n      }\n    } else if (scale <= previewScales.maxScale) {\n      // e.preventDefault();\n      onZoomIn();\n    }\n  }\n  function onResetScale() {\n    onScaleChange(1);\n  }\n  function onFullScreen() {\n    var wrapperRect = refWrapper.current.getBoundingClientRect();\n    var imgRect = refImage.current.getBoundingClientRect();\n    var newHeightScale = wrapperRect.height / (imgRect.height / scale);\n    var newWidthScale = wrapperRect.width / (imgRect.width / scale);\n    var newScale = Math.max(newHeightScale, newWidthScale);\n    onScaleChange(newScale);\n  }\n  // Image container is clicked\n  function onOutsideImgClick(e) {\n    if (e.target === e.currentTarget && maskClosable) {\n      close();\n    }\n  }\n  // Close button is clicked.\n  function onCloseClick() {\n    close();\n  }\n  function close() {\n    if (visible) {\n      onVisibleChange && onVisibleChange(false, visible);\n      isUndefined(mergedProps.visible) && setVisible(false);\n    }\n  }\n  function onWrapperResize(entry) {\n    if (entry && entry.length) {\n      var wrapperRect = entry[0].contentRect;\n      var nextSimple = wrapperRect.width < breakPoint;\n      setToolbarSimple(nextSimple);\n    }\n  }\n  // Check the translate and correct it if needed\n  var checkAndFixTranslate = function () {\n    if (!refWrapper.current || !refImage.current) return;\n    var wrapperRect = refWrapper.current.getBoundingClientRect();\n    var imgRect = refImage.current.getBoundingClientRect();\n    var _a = __read(getFixTranslate(wrapperRect, imgRect, translate.x, translate.y, scale), 2),\n      x = _a[0],\n      y = _a[1];\n    if (x !== translate.x || y !== translate.y) {\n      setTranslate({\n        x: x,\n        y: y\n      });\n    }\n  };\n  // Update position on moving if needed\n  var onMoving = function (e) {\n    if (visible && moving) {\n      e.preventDefault && e.preventDefault();\n      var _a = refMoveData.current,\n        originX = _a.originX,\n        originY = _a.originY,\n        pageX = _a.pageX,\n        pageY = _a.pageY;\n      var nextX = originX + (e.pageX - pageX) / scale;\n      var nextY = originY + (e.pageY - pageY) / scale;\n      setTranslate({\n        x: nextX,\n        y: nextY\n      });\n    }\n  };\n  var onMoveEnd = function (e) {\n    e.preventDefault && e.preventDefault();\n    setMoving(false);\n  };\n  function onImgLoaded(e) {\n    setStatus('loaded');\n    onLoad && onLoad(e);\n  }\n  function onImgLoadError(e) {\n    setStatus('error');\n    onError && onError(e);\n  }\n  // Record position data on move start\n  var onMoveStart = function (e) {\n    var _a;\n    (_a = e.preventDefault) === null || _a === void 0 ? void 0 : _a.call(e);\n    setMoving(true);\n    var ev = e.type === 'touchstart' ? e.touches[0] : e;\n    refMoveData.current.pageX = ev.pageX;\n    refMoveData.current.pageY = ev.pageY;\n    refMoveData.current.originX = translate.x;\n    refMoveData.current.originY = translate.y;\n    onMouseDown === null || onMouseDown === void 0 ? void 0 : onMouseDown(e);\n  };\n  useEffect(function () {\n    if (visible && moving) {\n      on(document, 'mousemove', onMoving, false);\n      on(document, 'mouseup', onMoveEnd, false);\n    }\n    return function () {\n      off(document, 'mousemove', onMoving, false);\n      off(document, 'mouseup', onMoveEnd, false);\n    };\n  }, [visible, moving]);\n  // Correct translate after moved\n  useEffect(function () {\n    if (resetTranslate && !moving) {\n      checkAndFixTranslate();\n    }\n  }, [moving, translate]);\n  // Correct translate when scale changes\n  useEffect(function () {\n    if (resetTranslate) {\n      checkAndFixTranslate();\n    }\n  }, [scale]);\n  // Reset when preview is opened\n  useEffect(function () {\n    if (visible) {\n      reset();\n    }\n  }, [visible]);\n  // Reset on first mount or image switches\n  useEffect(function () {\n    setPreviewImgSrc(mergedSrc);\n    setStatus(mergedSrc ? 'loading' : 'loaded');\n    reset();\n  }, [mergedSrc]);\n  useUpdate(function () {\n    previewScales.updateScale(scales);\n    setScale(1);\n  }, [scales]);\n  // Close when pressing esc\n  useEffect(function () {\n    var onKeyDown = function (e) {\n      if (e) {\n        switch (e.key) {\n          case Esc.key:\n            if (escToExit) {\n              close();\n            }\n            break;\n          case ArrowRight.key:\n            onNext();\n            break;\n          case ArrowLeft.key:\n            onPrev();\n            break;\n          case ArrowUp.key:\n            onZoomIn();\n            break;\n          case ArrowDown.key:\n            onZoomOut();\n            break;\n          default:\n        }\n      }\n    };\n    if (visible && !moving && !keyboardEventOn.current) {\n      keyboardEventOn.current = true;\n      on(document, 'keydown', onKeyDown);\n    }\n    return function () {\n      keyboardEventOn.current = false;\n      off(document, 'keydown', onKeyDown);\n    };\n  }, [visible, escToExit, moving, currentIndex, scale]);\n  var defaultActions = [{\n    key: 'fullScreen',\n    name: locale.ImagePreview.fullScreen,\n    content: React.createElement(IconFullscreen, null),\n    onClick: onFullScreen\n  }, {\n    key: 'rotateRight',\n    name: locale.ImagePreview.rotateRight,\n    content: React.createElement(IconRotateRight, null),\n    onClick: onRotateRight\n  }, {\n    key: 'rotateLeft',\n    name: locale.ImagePreview.rotateLeft,\n    content: React.createElement(IconRotateLeft, null),\n    onClick: onRotateLeft\n  }, {\n    key: 'zoomIn',\n    name: locale.ImagePreview.zoomIn,\n    content: React.createElement(IconZoomIn, null),\n    onClick: onZoomIn,\n    disabled: scale === previewScales.maxScale\n  }, {\n    key: 'zoomOut',\n    name: locale.ImagePreview.zoomOut,\n    content: React.createElement(IconZoomOut, null),\n    onClick: onZoomOut,\n    disabled: scale === previewScales.minScale\n  }, {\n    key: 'originalSize',\n    name: locale.ImagePreview.originalSize,\n    content: React.createElement(IconOriginalSize, null),\n    onClick: onResetScale\n  }];\n  var renderImage = function () {\n    var _a;\n    var _b;\n    var image = React.createElement(\"img\", __assign({\n      onWheel: onWheelZoom,\n      ref: refImage,\n      className: cs(imgClassName, previewPrefixCls + \"-img\", (_a = {}, _a[previewPrefixCls + \"-img-moving\"] = moving, _a)),\n      style: __assign(__assign({}, imgStyle), {\n        transform: \"translate(\" + translate.x + \"px, \" + translate.y + \"px) rotate(\" + rotate + \"deg)\"\n      }),\n      key: previewImgSrc,\n      src: previewImgSrc\n    }, restImgAttributes, {\n      onLoad: onImgLoaded,\n      onError: onImgLoadError,\n      onMouseDown: function (event) {\n        // only trigger onMoveStart when press mouse left button\n        event.button === 0 && onMoveStart(event);\n      }\n    }));\n    return (_b = imageRender === null || imageRender === void 0 ? void 0 : imageRender(image)) !== null && _b !== void 0 ? _b : image;\n  };\n  return React.createElement(Portal, {\n    visible: visible,\n    forceRender: false,\n    getContainer: getContainer\n  }, React.createElement(ConfigProvider, __assign({}, globalContext, {\n    getPopupContainer: function () {\n      return refWrapper.current;\n    }\n  }), React.createElement(\"div\", {\n    className: classNames,\n    style: __assign(__assign({}, style || {}), isFixed ? {} : {\n      zIndex: 'inherit',\n      position: 'absolute'\n    }),\n    ref: refRootWrapper\n  }, React.createElement(ArcoCSSTransition, {\n    in: visible,\n    timeout: 400,\n    appear: true,\n    classNames: \"fadeImage\",\n    mountOnEnter: true,\n    unmountOnExit: false,\n    onEnter: function (e) {\n      if (!e) return;\n      e.parentNode.style.display = 'block';\n      e.style.display = 'block';\n    },\n    onExited: function (e) {\n      if (!e) return;\n      e.parentNode.style.display = '';\n      e.style.display = 'none';\n    }\n  }, React.createElement(\"div\", {\n    className: previewPrefixCls + \"-mask\"\n  })), visible && React.createElement(ResizeObserver, {\n    onResize: onWrapperResize,\n    getTargetDOMNode: function () {\n      return refWrapper.current;\n    }\n  }, React.createElement(\"div\", {\n    ref: refWrapper,\n    className: previewPrefixCls + \"-wrapper\",\n    onClick: onOutsideImgClick\n  }, React.createElement(\"div\", {\n    ref: refImageContainer,\n    className: previewPrefixCls + \"-img-container\",\n    style: {\n      transform: \"scale(\" + scale + \", \" + scale + \")\"\n    },\n    onClick: onOutsideImgClick\n  }, renderImage(), isLoading && React.createElement(\"div\", {\n    className: previewPrefixCls + \"-loading\"\n  }, React.createElement(IconLoading, null))), React.createElement(ArcoCSSTransition, {\n    in: scaleValueVisible,\n    timeout: 400,\n    appear: true,\n    classNames: \"fadeImage\",\n    unmountOnExit: true\n  }, React.createElement(\"div\", {\n    className: previewPrefixCls + \"-scale-value\"\n  }, (scale * 100).toFixed(0), \"%\")), isLoaded && React.createElement(ImagePreviewToolbar, {\n    prefixCls: prefixCls,\n    previewPrefixCls: previewPrefixCls,\n    actions: actions,\n    actionsLayout: actionsLayout,\n    defaultActions: defaultActions,\n    simple: toolbarSimple\n  }), closable && React.createElement(\"div\", {\n    className: previewPrefixCls + \"-close-btn\",\n    onClick: onCloseClick\n  }, React.createElement(IconClose, null)), previewGroup && React.createElement(ImagePreviewArrow, {\n    previewCount: previewUrlMap.size,\n    current: currentIndex,\n    infinite: infinite,\n    onPrev: onPrev,\n    onNext: onNext\n  }), extraNode)))));\n}\nvar PreviewComponent = forwardRef(Preview);\nPreviewComponent.displayName = 'ImagePreview';\nexport default PreviewComponent;","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__read","o","m","Symbol","iterator","r","ar","next","done","push","value","error","React","forwardRef","useContext","useRef","useState","useImperativeHandle","useEffect","useCallback","useMemo","ArcoCSSTransition","findDOMNode","useMergeProps","useMergeValue","cs","on","off","isServerRendering","ResizeObserver","IconLoading","IconZoomOut","IconZoomIn","IconFullscreen","IconClose","IconRotateLeft","IconRotateRight","IconOriginalSize","ConfigProvider","ConfigContext","useImageStatus","PreviewScales","defaultScales","getFixTranslate","ImagePreviewToolbar","Portal","PreviewGroupContext","ImagePreviewArrow","useOverflowHidden","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","Esc","useUpdate","isUndefined","ROTATE_STEP","defaultProps","maskClosable","closable","breakPoint","actionsLayout","getPopupContainer","document","body","escToExit","scales","resetTranslate","Preview","baseProps","ref","_a","_b","previewGroup","previewUrlMap","currentIndex","setCurrentIndex","infinite","previewPropsMap","mergedPreviewProps","get","mergedProps","className","style","src","defaultVisible","actions","onVisibleChange","_c","imgAttributes","imageRender","_d","extra","extraNode","mergedSrc","_e","previewImgSrc","setPreviewImgSrc","_f","defaultValue","visible","setVisible","globalContext","getPrefixCls","locale","rtl","prefixCls","previewPrefixCls","classNames","refImage","refImageContainer","refWrapper","refRootWrapper","keyboardEventOn","refMoveData","pageX","pageY","originX","originY","_g","isLoading","isLoaded","setStatus","_h","toolbarSimple","setToolbarSimple","_j","x","y","translate","setTranslate","_k","scale","setScale","_l","scaleValueVisible","setScaleValueVisible","_m","rotate","setRotate","_o","moving","setMoving","previewScales","onLoad","onError","onMouseDown","imgStyle","imgClassName","restImgAttributes","reset","getRootDOMNode","current","_p","container","setContainer","getContainer","containerDom","hidden","isFixed","jumpTo","index","previewListLen","size","Math","abs","onPrev","onNext","onRotateLeft","onRotateRight","hideScaleTimer","showScaleValue","clearTimeout","setTimeout","onScaleChange","newScale","onZoomIn","getNextScale","onZoomOut","onWheelZoom","deltaY","minScale","maxScale","onResetScale","onFullScreen","wrapperRect","getBoundingClientRect","imgRect","newHeightScale","height","newWidthScale","width","max","onOutsideImgClick","target","currentTarget","close","onCloseClick","onWrapperResize","entry","contentRect","nextSimple","checkAndFixTranslate","onMoving","preventDefault","nextX","nextY","onMoveEnd","onImgLoaded","onImgLoadError","onMoveStart","ev","type","touches","updateScale","onKeyDown","key","defaultActions","name","ImagePreview","fullScreen","content","createElement","onClick","rotateRight","rotateLeft","zoomIn","disabled","zoomOut","originalSize","renderImage","image","onWheel","transform","event","button","forceRender","zIndex","position","in","timeout","appear","mountOnEnter","unmountOnExit","onEnter","parentNode","display","onExited","onResize","getTargetDOMNode","toFixed","simple","previewCount","PreviewComponent","displayName"],"sources":["D:/Nodejs/oj-frontend/node_modules/@arco-design/web-react/es/Image/image-preview.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport React, { forwardRef, useContext, useRef, useState, useImperativeHandle, useEffect, useCallback, useMemo, } from 'react';\nimport ArcoCSSTransition from '../_util/CSSTransition';\nimport { findDOMNode } from '../_util/react-dom';\nimport useMergeProps from '../_util/hooks/useMergeProps';\nimport useMergeValue from '../_util/hooks/useMergeValue';\nimport cs from '../_util/classNames';\nimport { on, off, isServerRendering } from '../_util/dom';\nimport ResizeObserver from '../_util/resizeObserver';\nimport IconLoading from '../../icon/react-icon/IconLoading';\nimport IconZoomOut from '../../icon/react-icon/IconZoomOut';\nimport IconZoomIn from '../../icon/react-icon/IconZoomIn';\nimport IconFullscreen from '../../icon/react-icon/IconFullscreen';\nimport IconClose from '../../icon/react-icon/IconClose';\nimport IconRotateLeft from '../../icon/react-icon/IconRotateLeft';\nimport IconRotateRight from '../../icon/react-icon/IconRotateRight';\nimport IconOriginalSize from '../../icon/react-icon/IconOriginalSize';\nimport ConfigProvider, { ConfigContext } from '../ConfigProvider';\nimport useImageStatus from './utils/hooks/useImageStatus';\nimport PreviewScales, { defaultScales } from './utils/getScale';\nimport getFixTranslate from './utils/getFixTranslate';\nimport ImagePreviewToolbar from './image-preview-toolbar';\nimport Portal from '../Portal';\nimport { PreviewGroupContext } from './previewGroupContext';\nimport ImagePreviewArrow from './image-preview-arrow';\nimport useOverflowHidden from '../_util/hooks/useOverflowHidden';\nimport { ArrowDown, ArrowLeft, ArrowRight, ArrowUp, Esc } from '../_util/keycode';\nimport useUpdate from '../_util/hooks/useUpdate';\nimport { isUndefined } from '../_util/is';\nvar ROTATE_STEP = 90;\nvar defaultProps = {\n    maskClosable: true,\n    closable: true,\n    breakPoint: 316,\n    actionsLayout: [\n        'fullScreen',\n        'rotateRight',\n        'rotateLeft',\n        'zoomIn',\n        'zoomOut',\n        'originalSize',\n        'extra',\n    ],\n    getPopupContainer: function () { return document.body; },\n    escToExit: true,\n    scales: defaultScales,\n    resetTranslate: true,\n};\nfunction Preview(baseProps, ref) {\n    var _a;\n    var _b = useContext(PreviewGroupContext), previewGroup = _b.previewGroup, previewUrlMap = _b.previewUrlMap, currentIndex = _b.currentIndex, setCurrentIndex = _b.setCurrentIndex, infinite = _b.infinite, previewPropsMap = _b.previewPropsMap;\n    var mergedPreviewProps = previewGroup ? previewPropsMap.get(currentIndex) : {};\n    var mergedProps = useMergeProps(baseProps, defaultProps, mergedPreviewProps);\n    var className = mergedProps.className, style = mergedProps.style, src = mergedProps.src, defaultVisible = mergedProps.defaultVisible, maskClosable = mergedProps.maskClosable, closable = mergedProps.closable, breakPoint = mergedProps.breakPoint, actions = mergedProps.actions, actionsLayout = mergedProps.actionsLayout, getPopupContainer = mergedProps.getPopupContainer, onVisibleChange = mergedProps.onVisibleChange, scales = mergedProps.scales, escToExit = mergedProps.escToExit, _c = mergedProps.imgAttributes, imgAttributes = _c === void 0 ? {} : _c, imageRender = mergedProps.imageRender, _d = mergedProps.extra, extraNode = _d === void 0 ? null : _d, resetTranslate = mergedProps.resetTranslate;\n    var mergedSrc = previewGroup ? previewUrlMap.get(currentIndex) : src;\n    var _e = __read(useState(mergedSrc), 2), previewImgSrc = _e[0], setPreviewImgSrc = _e[1];\n    var _f = __read(useMergeValue(false, {\n        defaultValue: defaultVisible,\n        value: mergedProps.visible,\n    }), 2), visible = _f[0], setVisible = _f[1];\n    var globalContext = useContext(ConfigContext);\n    var getPrefixCls = globalContext.getPrefixCls, locale = globalContext.locale, rtl = globalContext.rtl;\n    var prefixCls = getPrefixCls('image');\n    var previewPrefixCls = prefixCls + \"-preview\";\n    var classNames = cs(previewPrefixCls, (_a = {},\n        _a[previewPrefixCls + \"-hide\"] = !visible,\n        _a[previewPrefixCls + \"-rtl\"] = rtl,\n        _a), className);\n    var refImage = useRef();\n    var refImageContainer = useRef();\n    var refWrapper = useRef();\n    var refRootWrapper = useRef();\n    var keyboardEventOn = useRef(false);\n    var refMoveData = useRef({\n        pageX: 0,\n        pageY: 0,\n        originX: 0,\n        originY: 0,\n    });\n    var _g = useImageStatus('loading'), isLoading = _g.isLoading, isLoaded = _g.isLoaded, setStatus = _g.setStatus;\n    var _h = __read(useState(false), 2), toolbarSimple = _h[0], setToolbarSimple = _h[1];\n    var _j = __read(useState({ x: 0, y: 0 }), 2), translate = _j[0], setTranslate = _j[1];\n    var _k = __read(useState(1), 2), scale = _k[0], setScale = _k[1];\n    var _l = __read(useState(false), 2), scaleValueVisible = _l[0], setScaleValueVisible = _l[1];\n    var _m = __read(useState(0), 2), rotate = _m[0], setRotate = _m[1];\n    var _o = __read(useState(false), 2), moving = _o[0], setMoving = _o[1];\n    var previewScales = useMemo(function () {\n        return new PreviewScales(scales);\n    }, []);\n    var onLoad = imgAttributes.onLoad, onError = imgAttributes.onError, onMouseDown = imgAttributes.onMouseDown, imgStyle = imgAttributes.style, imgClassName = imgAttributes.className, restImgAttributes = __rest(imgAttributes, [\"onLoad\", \"onError\", \"onMouseDown\", \"style\", \"className\"]);\n    // Reset image params\n    function reset() {\n        setTranslate({ x: 0, y: 0 });\n        setScale(1);\n        setRotate(0);\n    }\n    useImperativeHandle(ref, function () { return ({\n        reset: reset,\n        getRootDOMNode: function () { return refRootWrapper.current; },\n    }); });\n    var _p = __read(useState(), 2), container = _p[0], setContainer = _p[1];\n    var getContainer = useCallback(function () { return container; }, [container]);\n    useEffect(function () {\n        var container = getPopupContainer === null || getPopupContainer === void 0 ? void 0 : getPopupContainer();\n        var containerDom = (findDOMNode(container) || document.body);\n        setContainer(containerDom);\n    }, [getPopupContainer]);\n    useOverflowHidden(getContainer, { hidden: visible });\n    var isFixed = useMemo(function () { return !isServerRendering && container === document.body; }, [container]);\n    // Jump to image at the specified index\n    function jumpTo(index) {\n        var previewListLen = previewUrlMap.size;\n        if (infinite) {\n            index %= previewListLen;\n            if (index < 0)\n                index = previewListLen - Math.abs(index);\n        }\n        if (index !== currentIndex && index >= 0 && index <= previewListLen - 1) {\n            setCurrentIndex(index);\n        }\n    }\n    function onPrev() {\n        jumpTo(currentIndex - 1);\n    }\n    function onNext() {\n        jumpTo(currentIndex + 1);\n    }\n    // Anticlockwise rotation\n    function onRotateLeft() {\n        setRotate(rotate === 0 ? 360 - ROTATE_STEP : rotate - ROTATE_STEP);\n    }\n    // Clockwise rotation\n    function onRotateRight() {\n        setRotate((rotate + ROTATE_STEP) % 360);\n    }\n    // Scale\n    var hideScaleTimer = useRef(null);\n    var showScaleValue = function () {\n        !scaleValueVisible && setScaleValueVisible(true);\n        hideScaleTimer.current && clearTimeout(hideScaleTimer.current);\n        hideScaleTimer.current = setTimeout(function () {\n            setScaleValueVisible(false);\n        }, 1000);\n    };\n    var onScaleChange = function (newScale) {\n        if (scale !== newScale) {\n            setScale(newScale);\n            showScaleValue();\n        }\n    };\n    function onZoomIn() {\n        var newScale = previewScales.getNextScale(scale, 'zoomIn');\n        onScaleChange(newScale);\n    }\n    function onZoomOut() {\n        var newScale = previewScales.getNextScale(scale, 'zoomOut');\n        onScaleChange(newScale);\n    }\n    function onWheelZoom(e) {\n        if (e.deltaY > 0) {\n            // 缩小\n            if (scale >= previewScales.minScale) {\n                // e.preventDefault();\n                onZoomOut();\n            }\n        }\n        else if (scale <= previewScales.maxScale) {\n            // e.preventDefault();\n            onZoomIn();\n        }\n    }\n    function onResetScale() {\n        onScaleChange(1);\n    }\n    function onFullScreen() {\n        var wrapperRect = refWrapper.current.getBoundingClientRect();\n        var imgRect = refImage.current.getBoundingClientRect();\n        var newHeightScale = wrapperRect.height / (imgRect.height / scale);\n        var newWidthScale = wrapperRect.width / (imgRect.width / scale);\n        var newScale = Math.max(newHeightScale, newWidthScale);\n        onScaleChange(newScale);\n    }\n    // Image container is clicked\n    function onOutsideImgClick(e) {\n        if (e.target === e.currentTarget && maskClosable) {\n            close();\n        }\n    }\n    // Close button is clicked.\n    function onCloseClick() {\n        close();\n    }\n    function close() {\n        if (visible) {\n            onVisibleChange && onVisibleChange(false, visible);\n            isUndefined(mergedProps.visible) && setVisible(false);\n        }\n    }\n    function onWrapperResize(entry) {\n        if (entry && entry.length) {\n            var wrapperRect = entry[0].contentRect;\n            var nextSimple = wrapperRect.width < breakPoint;\n            setToolbarSimple(nextSimple);\n        }\n    }\n    // Check the translate and correct it if needed\n    var checkAndFixTranslate = function () {\n        if (!refWrapper.current || !refImage.current)\n            return;\n        var wrapperRect = refWrapper.current.getBoundingClientRect();\n        var imgRect = refImage.current.getBoundingClientRect();\n        var _a = __read(getFixTranslate(wrapperRect, imgRect, translate.x, translate.y, scale), 2), x = _a[0], y = _a[1];\n        if (x !== translate.x || y !== translate.y) {\n            setTranslate({\n                x: x,\n                y: y,\n            });\n        }\n    };\n    // Update position on moving if needed\n    var onMoving = function (e) {\n        if (visible && moving) {\n            e.preventDefault && e.preventDefault();\n            var _a = refMoveData.current, originX = _a.originX, originY = _a.originY, pageX = _a.pageX, pageY = _a.pageY;\n            var nextX = originX + (e.pageX - pageX) / scale;\n            var nextY = originY + (e.pageY - pageY) / scale;\n            setTranslate({\n                x: nextX,\n                y: nextY,\n            });\n        }\n    };\n    var onMoveEnd = function (e) {\n        e.preventDefault && e.preventDefault();\n        setMoving(false);\n    };\n    function onImgLoaded(e) {\n        setStatus('loaded');\n        onLoad && onLoad(e);\n    }\n    function onImgLoadError(e) {\n        setStatus('error');\n        onError && onError(e);\n    }\n    // Record position data on move start\n    var onMoveStart = function (e) {\n        var _a;\n        (_a = e.preventDefault) === null || _a === void 0 ? void 0 : _a.call(e);\n        setMoving(true);\n        var ev = e.type === 'touchstart' ? e.touches[0] : e;\n        refMoveData.current.pageX = ev.pageX;\n        refMoveData.current.pageY = ev.pageY;\n        refMoveData.current.originX = translate.x;\n        refMoveData.current.originY = translate.y;\n        onMouseDown === null || onMouseDown === void 0 ? void 0 : onMouseDown(e);\n    };\n    useEffect(function () {\n        if (visible && moving) {\n            on(document, 'mousemove', onMoving, false);\n            on(document, 'mouseup', onMoveEnd, false);\n        }\n        return function () {\n            off(document, 'mousemove', onMoving, false);\n            off(document, 'mouseup', onMoveEnd, false);\n        };\n    }, [visible, moving]);\n    // Correct translate after moved\n    useEffect(function () {\n        if (resetTranslate && !moving) {\n            checkAndFixTranslate();\n        }\n    }, [moving, translate]);\n    // Correct translate when scale changes\n    useEffect(function () {\n        if (resetTranslate) {\n            checkAndFixTranslate();\n        }\n    }, [scale]);\n    // Reset when preview is opened\n    useEffect(function () {\n        if (visible) {\n            reset();\n        }\n    }, [visible]);\n    // Reset on first mount or image switches\n    useEffect(function () {\n        setPreviewImgSrc(mergedSrc);\n        setStatus(mergedSrc ? 'loading' : 'loaded');\n        reset();\n    }, [mergedSrc]);\n    useUpdate(function () {\n        previewScales.updateScale(scales);\n        setScale(1);\n    }, [scales]);\n    // Close when pressing esc\n    useEffect(function () {\n        var onKeyDown = function (e) {\n            if (e) {\n                switch (e.key) {\n                    case Esc.key:\n                        if (escToExit) {\n                            close();\n                        }\n                        break;\n                    case ArrowRight.key:\n                        onNext();\n                        break;\n                    case ArrowLeft.key:\n                        onPrev();\n                        break;\n                    case ArrowUp.key:\n                        onZoomIn();\n                        break;\n                    case ArrowDown.key:\n                        onZoomOut();\n                        break;\n                    default:\n                }\n            }\n        };\n        if (visible && !moving && !keyboardEventOn.current) {\n            keyboardEventOn.current = true;\n            on(document, 'keydown', onKeyDown);\n        }\n        return function () {\n            keyboardEventOn.current = false;\n            off(document, 'keydown', onKeyDown);\n        };\n    }, [visible, escToExit, moving, currentIndex, scale]);\n    var defaultActions = [\n        {\n            key: 'fullScreen',\n            name: locale.ImagePreview.fullScreen,\n            content: React.createElement(IconFullscreen, null),\n            onClick: onFullScreen,\n        },\n        {\n            key: 'rotateRight',\n            name: locale.ImagePreview.rotateRight,\n            content: React.createElement(IconRotateRight, null),\n            onClick: onRotateRight,\n        },\n        {\n            key: 'rotateLeft',\n            name: locale.ImagePreview.rotateLeft,\n            content: React.createElement(IconRotateLeft, null),\n            onClick: onRotateLeft,\n        },\n        {\n            key: 'zoomIn',\n            name: locale.ImagePreview.zoomIn,\n            content: React.createElement(IconZoomIn, null),\n            onClick: onZoomIn,\n            disabled: scale === previewScales.maxScale,\n        },\n        {\n            key: 'zoomOut',\n            name: locale.ImagePreview.zoomOut,\n            content: React.createElement(IconZoomOut, null),\n            onClick: onZoomOut,\n            disabled: scale === previewScales.minScale,\n        },\n        {\n            key: 'originalSize',\n            name: locale.ImagePreview.originalSize,\n            content: React.createElement(IconOriginalSize, null),\n            onClick: onResetScale,\n        },\n    ];\n    var renderImage = function () {\n        var _a;\n        var _b;\n        var image = (React.createElement(\"img\", __assign({ onWheel: onWheelZoom, ref: refImage, className: cs(imgClassName, previewPrefixCls + \"-img\", (_a = {},\n                _a[previewPrefixCls + \"-img-moving\"] = moving,\n                _a)), style: __assign(__assign({}, imgStyle), { transform: \"translate(\" + translate.x + \"px, \" + translate.y + \"px) rotate(\" + rotate + \"deg)\" }), key: previewImgSrc, src: previewImgSrc }, restImgAttributes, { onLoad: onImgLoaded, onError: onImgLoadError, onMouseDown: function (event) {\n                // only trigger onMoveStart when press mouse left button\n                event.button === 0 && onMoveStart(event);\n            } })));\n        return (_b = imageRender === null || imageRender === void 0 ? void 0 : imageRender(image)) !== null && _b !== void 0 ? _b : image;\n    };\n    return (React.createElement(Portal, { visible: visible, forceRender: false, getContainer: getContainer },\n        React.createElement(ConfigProvider, __assign({}, globalContext, { getPopupContainer: function () { return refWrapper.current; } }),\n            React.createElement(\"div\", { className: classNames, style: __assign(__assign({}, (style || {})), (isFixed ? {} : { zIndex: 'inherit', position: 'absolute' })), ref: refRootWrapper },\n                React.createElement(ArcoCSSTransition, { in: visible, timeout: 400, appear: true, classNames: \"fadeImage\", mountOnEnter: true, unmountOnExit: false, onEnter: function (e) {\n                        if (!e)\n                            return;\n                        e.parentNode.style.display = 'block';\n                        e.style.display = 'block';\n                    }, onExited: function (e) {\n                        if (!e)\n                            return;\n                        e.parentNode.style.display = '';\n                        e.style.display = 'none';\n                    } },\n                    React.createElement(\"div\", { className: previewPrefixCls + \"-mask\" })),\n                visible && (React.createElement(ResizeObserver, { onResize: onWrapperResize, getTargetDOMNode: function () { return refWrapper.current; } },\n                    React.createElement(\"div\", { ref: refWrapper, className: previewPrefixCls + \"-wrapper\", onClick: onOutsideImgClick },\n                        React.createElement(\"div\", { ref: refImageContainer, className: previewPrefixCls + \"-img-container\", style: { transform: \"scale(\" + scale + \", \" + scale + \")\" }, onClick: onOutsideImgClick },\n                            renderImage(),\n                            isLoading && (React.createElement(\"div\", { className: previewPrefixCls + \"-loading\" },\n                                React.createElement(IconLoading, null)))),\n                        React.createElement(ArcoCSSTransition, { in: scaleValueVisible, timeout: 400, appear: true, classNames: \"fadeImage\", unmountOnExit: true },\n                            React.createElement(\"div\", { className: previewPrefixCls + \"-scale-value\" },\n                                (scale * 100).toFixed(0),\n                                \"%\")),\n                        isLoaded && (React.createElement(ImagePreviewToolbar, { prefixCls: prefixCls, previewPrefixCls: previewPrefixCls, actions: actions, actionsLayout: actionsLayout, defaultActions: defaultActions, simple: toolbarSimple })),\n                        closable && (React.createElement(\"div\", { className: previewPrefixCls + \"-close-btn\", onClick: onCloseClick },\n                            React.createElement(IconClose, null))),\n                        previewGroup && (React.createElement(ImagePreviewArrow, { previewCount: previewUrlMap.size, current: currentIndex, infinite: infinite, onPrev: onPrev, onNext: onNext })),\n                        extraNode)))))));\n}\nvar PreviewComponent = forwardRef(Preview);\nPreviewComponent.displayName = 'ImagePreview';\nexport default PreviewComponent;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}