{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport remarkMath from \"remark-math\";\nconst block = \"Block formula\";\nconst blockText = \"formula\";\nconst inline = \"Inline formula\";\nconst inlineText = \"formula\";\nconst en = {\n  block,\n  blockText,\n  inline,\n  inlineText\n};\nconst icons = {\n  Formula: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"m40 9-3-3H8l18 18L8 42h29l3-3\"/></svg>',\n  Inline: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"m37 9-3-3H8l17 18L8 42h26l3-3M5 24h10M33 24h10\"/></svg>',\n  Block: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"m36 11-3-3H12l16 16-16 16h21l3-3M6 5v38M42 5v38\"/></svg>'\n};\nfunction getMathActions(locale) {\n  return [{\n    icon: icons.Formula,\n    handler: {\n      type: \"dropdown\",\n      actions: [{\n        title: locale.inline,\n        icon: icons.Inline,\n        cheatsheet: `$${locale.inlineText}$`,\n        handler: {\n          type: \"action\",\n          click({\n            wrapText,\n            editor\n          }) {\n            wrapText(\"$\");\n            editor.focus();\n          }\n        }\n      }, {\n        title: locale.block,\n        icon: icons.Block,\n        cheatsheet: `$$↵${locale.blockText}↵$$`,\n        handler: {\n          type: \"action\",\n          click({\n            appendBlock,\n            editor,\n            codemirror\n          }) {\n            const {\n              line\n            } = appendBlock(\"$$\\n\\\\TeX\\n$$\");\n            editor.setSelection(codemirror.Pos(line + 1, 0), codemirror.Pos(line + 1, 4));\n            editor.focus();\n          }\n        }\n      }]\n    }\n  }];\n}\nfunction math({\n  locale: _locale,\n  katexOptions\n} = {}) {\n  const locale = {\n    ...en,\n    ..._locale\n  };\n  let katex;\n  return {\n    remark: processor => processor.use(remarkMath),\n    viewerEffect({\n      markdownBody\n    }) {\n      const renderMath = async (selector, displayMode) => {\n        const els = markdownBody.querySelectorAll(selector);\n        if (els.length === 0) return;\n        if (!katex) {\n          katex = await import(\"katex\").then(m => m.default);\n        }\n        els.forEach(el => {\n          katex.render(el.innerText, el, {\n            ...katexOptions,\n            throwOnError: false,\n            displayMode\n          });\n        });\n      };\n      renderMath(\".math.math-inline\", false);\n      renderMath(\".math.math-display\", true);\n    },\n    actions: getMathActions(locale)\n  };\n}\nexport { math as default };","map":{"version":3,"names":["remarkMath","block","blockText","inline","inlineText","en","icons","Formula","Inline","Block","getMathActions","locale","icon","handler","type","actions","title","cheatsheet","click","wrapText","editor","focus","appendBlock","codemirror","line","setSelection","Pos","math","_locale","katexOptions","katex","remark","processor","use","viewerEffect","markdownBody","renderMath","selector","displayMode","els","querySelectorAll","length","then","m","default","forEach","el","render","innerText","throwOnError"],"sources":["D:/Nodejs/oj-frontend/node_modules/@bytemd/plugin-math/dist/index.mjs"],"sourcesContent":["import remarkMath from \"remark-math\";\nconst block = \"Block formula\";\nconst blockText = \"formula\";\nconst inline = \"Inline formula\";\nconst inlineText = \"formula\";\nconst en = {\n  block,\n  blockText,\n  inline,\n  inlineText\n};\nconst icons = {\n  Formula: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"m40 9-3-3H8l18 18L8 42h29l3-3\"/></svg>',\n  Inline: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"m37 9-3-3H8l17 18L8 42h26l3-3M5 24h10M33 24h10\"/></svg>',\n  Block: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" fill=\"none\" viewBox=\"0 0 48 48\"><path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"4\" d=\"m36 11-3-3H12l16 16-16 16h21l3-3M6 5v38M42 5v38\"/></svg>'\n};\nfunction getMathActions(locale) {\n  return [\n    {\n      icon: icons.Formula,\n      handler: {\n        type: \"dropdown\",\n        actions: [\n          {\n            title: locale.inline,\n            icon: icons.Inline,\n            cheatsheet: `$${locale.inlineText}$`,\n            handler: {\n              type: \"action\",\n              click({ wrapText, editor }) {\n                wrapText(\"$\");\n                editor.focus();\n              }\n            }\n          },\n          {\n            title: locale.block,\n            icon: icons.Block,\n            cheatsheet: `$$↵${locale.blockText}↵$$`,\n            handler: {\n              type: \"action\",\n              click({ appendBlock, editor, codemirror }) {\n                const { line } = appendBlock(\"$$\\n\\\\TeX\\n$$\");\n                editor.setSelection(\n                  codemirror.Pos(line + 1, 0),\n                  codemirror.Pos(line + 1, 4)\n                );\n                editor.focus();\n              }\n            }\n          }\n        ]\n      }\n    }\n  ];\n}\nfunction math({\n  locale: _locale,\n  katexOptions\n} = {}) {\n  const locale = { ...en, ..._locale };\n  let katex;\n  return {\n    remark: (processor) => processor.use(remarkMath),\n    viewerEffect({ markdownBody }) {\n      const renderMath = async (selector, displayMode) => {\n        const els = markdownBody.querySelectorAll(selector);\n        if (els.length === 0)\n          return;\n        if (!katex) {\n          katex = await import(\"katex\").then((m) => m.default);\n        }\n        els.forEach((el) => {\n          katex.render(el.innerText, el, {\n            ...katexOptions,\n            throwOnError: false,\n            displayMode\n          });\n        });\n      };\n      renderMath(\".math.math-inline\", false);\n      renderMath(\".math.math-display\", true);\n    },\n    actions: getMathActions(locale)\n  };\n}\nexport {\n  math as default\n};\n"],"mappings":";;AAAA,OAAOA,UAAU,MAAM,aAAa;AACpC,MAAMC,KAAK,GAAG,eAAe;AAC7B,MAAMC,SAAS,GAAG,SAAS;AAC3B,MAAMC,MAAM,GAAG,gBAAgB;AAC/B,MAAMC,UAAU,GAAG,SAAS;AAC5B,MAAMC,EAAE,GAAG;EACTJ,KAAK;EACLC,SAAS;EACTC,MAAM;EACNC;AACF,CAAC;AACD,MAAME,KAAK,GAAG;EACZC,OAAO,EAAE,wOAAwO;EACjPC,MAAM,EAAE,yPAAyP;EACjQC,KAAK,EAAE;AACT,CAAC;AACD,SAASC,cAAcA,CAACC,MAAM,EAAE;EAC9B,OAAO,CACL;IACEC,IAAI,EAAEN,KAAK,CAACC,OAAO;IACnBM,OAAO,EAAE;MACPC,IAAI,EAAE,UAAU;MAChBC,OAAO,EAAE,CACP;QACEC,KAAK,EAAEL,MAAM,CAACR,MAAM;QACpBS,IAAI,EAAEN,KAAK,CAACE,MAAM;QAClBS,UAAU,EAAE,IAAIN,MAAM,CAACP,UAAU,GAAG;QACpCS,OAAO,EAAE;UACPC,IAAI,EAAE,QAAQ;UACdI,KAAKA,CAAC;YAAEC,QAAQ;YAAEC;UAAO,CAAC,EAAE;YAC1BD,QAAQ,CAAC,GAAG,CAAC;YACbC,MAAM,CAACC,KAAK,CAAC,CAAC;UAChB;QACF;MACF,CAAC,EACD;QACEL,KAAK,EAAEL,MAAM,CAACV,KAAK;QACnBW,IAAI,EAAEN,KAAK,CAACG,KAAK;QACjBQ,UAAU,EAAE,MAAMN,MAAM,CAACT,SAAS,KAAK;QACvCW,OAAO,EAAE;UACPC,IAAI,EAAE,QAAQ;UACdI,KAAKA,CAAC;YAAEI,WAAW;YAAEF,MAAM;YAAEG;UAAW,CAAC,EAAE;YACzC,MAAM;cAAEC;YAAK,CAAC,GAAGF,WAAW,CAAC,eAAe,CAAC;YAC7CF,MAAM,CAACK,YAAY,CACjBF,UAAU,CAACG,GAAG,CAACF,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC,EAC3BD,UAAU,CAACG,GAAG,CAACF,IAAI,GAAG,CAAC,EAAE,CAAC,CAC5B,CAAC;YACDJ,MAAM,CAACC,KAAK,CAAC,CAAC;UAChB;QACF;MACF,CAAC;IAEL;EACF,CAAC,CACF;AACH;AACA,SAASM,IAAIA,CAAC;EACZhB,MAAM,EAAEiB,OAAO;EACfC;AACF,CAAC,GAAG,CAAC,CAAC,EAAE;EACN,MAAMlB,MAAM,GAAG;IAAE,GAAGN,EAAE;IAAE,GAAGuB;EAAQ,CAAC;EACpC,IAAIE,KAAK;EACT,OAAO;IACLC,MAAM,EAAGC,SAAS,IAAKA,SAAS,CAACC,GAAG,CAACjC,UAAU,CAAC;IAChDkC,YAAYA,CAAC;MAAEC;IAAa,CAAC,EAAE;MAC7B,MAAMC,UAAU,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,WAAW,KAAK;QAClD,MAAMC,GAAG,GAAGJ,YAAY,CAACK,gBAAgB,CAACH,QAAQ,CAAC;QACnD,IAAIE,GAAG,CAACE,MAAM,KAAK,CAAC,EAClB;QACF,IAAI,CAACX,KAAK,EAAE;UACVA,KAAK,GAAG,MAAM,MAAM,CAAC,OAAO,CAAC,CAACY,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,OAAO,CAAC;QACtD;QACAL,GAAG,CAACM,OAAO,CAAEC,EAAE,IAAK;UAClBhB,KAAK,CAACiB,MAAM,CAACD,EAAE,CAACE,SAAS,EAAEF,EAAE,EAAE;YAC7B,GAAGjB,YAAY;YACfoB,YAAY,EAAE,KAAK;YACnBX;UACF,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ,CAAC;MACDF,UAAU,CAAC,mBAAmB,EAAE,KAAK,CAAC;MACtCA,UAAU,CAAC,oBAAoB,EAAE,IAAI,CAAC;IACxC,CAAC;IACDrB,OAAO,EAAEL,cAAc,CAACC,MAAM;EAChC,CAAC;AACH;AACA,SACEgB,IAAI,IAAIiB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}