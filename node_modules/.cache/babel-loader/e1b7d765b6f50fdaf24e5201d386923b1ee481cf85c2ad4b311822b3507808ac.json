{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nimport { useRef, useState } from 'react';\nimport { Enter } from '../_util/keycode';\n// Handle input text like Chinese\nexport default function useComposition(_a) {\n  var value = _a.value,\n    maxLength = _a.maxLength,\n    onChange = _a.onChange,\n    onKeyDown = _a.onKeyDown,\n    onPressEnter = _a.onPressEnter,\n    beforeTriggerValueChangeCallback = _a.beforeTriggerValueChangeCallback,\n    normalizeHandler = _a.normalizeHandler;\n  var refIsComposition = useRef(false);\n  var _b = __read(useState(''), 2),\n    compositionValue = _b[0],\n    setCompositionValue = _b[1];\n  var triggerValueChangeCallback = function (newValue, e) {\n    if (beforeTriggerValueChangeCallback) {\n      beforeTriggerValueChangeCallback(newValue);\n    }\n    if (onChange &&\n    // https://github.com/arco-design/arco-design/issues/520\n    // Avoid triggering onChange repeatedly for the same value\n    // Compositionend is earlier than onchange in Firefox, different with chrome\n    newValue !== value && (maxLength === undefined || newValue.length <= maxLength)) {\n      onChange(newValue, e);\n    }\n  };\n  return {\n    compositionValue: compositionValue,\n    triggerValueChangeCallback: triggerValueChangeCallback,\n    compositionHandler: function (e) {\n      refIsComposition.current = e.type !== 'compositionend';\n      if (!refIsComposition.current) {\n        setCompositionValue(undefined);\n        triggerValueChangeCallback(e.target.value, e);\n      }\n    },\n    valueChangeHandler: function (e) {\n      var newValue = e.target.value;\n      if (!refIsComposition.current) {\n        compositionValue && setCompositionValue(undefined);\n        triggerValueChangeCallback(newValue, e);\n      } else {\n        // https://github.com/arco-design/arco-design/issues/397\n        // compositionupdate => onchange\n        refIsComposition.current = false;\n        setCompositionValue(newValue);\n      }\n    },\n    keyDownHandler: function (e) {\n      var keyCode = e.keyCode || e.which;\n      if (!refIsComposition.current) {\n        onKeyDown && onKeyDown(e);\n        if (keyCode === Enter.code) {\n          onPressEnter && onPressEnter(e);\n          var normalize = normalizeHandler === null || normalizeHandler === void 0 ? void 0 : normalizeHandler('onPressEnter');\n          normalize && triggerValueChangeCallback(normalize(e.target.value), e);\n        }\n      }\n    }\n  };\n}","map":{"version":3,"names":["__read","o","n","m","Symbol","iterator","i","call","r","ar","e","next","done","push","value","error","useRef","useState","Enter","useComposition","_a","maxLength","onChange","onKeyDown","onPressEnter","beforeTriggerValueChangeCallback","normalizeHandler","refIsComposition","_b","compositionValue","setCompositionValue","triggerValueChangeCallback","newValue","undefined","length","compositionHandler","current","type","target","valueChangeHandler","keyDownHandler","keyCode","which","code","normalize"],"sources":["D:/Nodejs/oj-frontend/node_modules/@arco-design/web-react/es/Input/useComposition.js"],"sourcesContent":["var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { useRef, useState, } from 'react';\nimport { Enter } from '../_util/keycode';\n// Handle input text like Chinese\nexport default function useComposition(_a) {\n    var value = _a.value, maxLength = _a.maxLength, onChange = _a.onChange, onKeyDown = _a.onKeyDown, onPressEnter = _a.onPressEnter, beforeTriggerValueChangeCallback = _a.beforeTriggerValueChangeCallback, normalizeHandler = _a.normalizeHandler;\n    var refIsComposition = useRef(false);\n    var _b = __read(useState(''), 2), compositionValue = _b[0], setCompositionValue = _b[1];\n    var triggerValueChangeCallback = function (newValue, e) {\n        if (beforeTriggerValueChangeCallback) {\n            beforeTriggerValueChangeCallback(newValue);\n        }\n        if (onChange &&\n            // https://github.com/arco-design/arco-design/issues/520\n            // Avoid triggering onChange repeatedly for the same value\n            // Compositionend is earlier than onchange in Firefox, different with chrome\n            newValue !== value &&\n            (maxLength === undefined || newValue.length <= maxLength)) {\n            onChange(newValue, e);\n        }\n    };\n    return {\n        compositionValue: compositionValue,\n        triggerValueChangeCallback: triggerValueChangeCallback,\n        compositionHandler: function (e) {\n            refIsComposition.current = e.type !== 'compositionend';\n            if (!refIsComposition.current) {\n                setCompositionValue(undefined);\n                triggerValueChangeCallback(e.target.value, e);\n            }\n        },\n        valueChangeHandler: function (e) {\n            var newValue = e.target.value;\n            if (!refIsComposition.current) {\n                compositionValue && setCompositionValue(undefined);\n                triggerValueChangeCallback(newValue, e);\n            }\n            else {\n                // https://github.com/arco-design/arco-design/issues/397\n                // compositionupdate => onchange\n                refIsComposition.current = false;\n                setCompositionValue(newValue);\n            }\n        },\n        keyDownHandler: function (e) {\n            var keyCode = e.keyCode || e.which;\n            if (!refIsComposition.current) {\n                onKeyDown && onKeyDown(e);\n                if (keyCode === Enter.code) {\n                    onPressEnter && onPressEnter(e);\n                    var normalize = normalizeHandler === null || normalizeHandler === void 0 ? void 0 : normalizeHandler('onPressEnter');\n                    normalize && triggerValueChangeCallback(normalize(e.target.value), e);\n                }\n            }\n        },\n    };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}